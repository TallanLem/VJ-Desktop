# VJ-Desktop

PyQt5 приложение подбора насосов (без SQL, каталог в памяти + локальный cache).

## Важные настройки в начале `main.py`
- `PARAM_FONT_SIZE_PT` — размер шрифта параметров в правой панели.
- `GRAPH_WIDTH`, `GRAPH_HEIGHT` — фиксированные размеры графических полей.
- `MID_INFO_BOX_WIDTH_RATIO` — ширина информационного бокса между графиками.
- `FACT_WRAP_AFTER`, `SYSTEM_WRAP_AFTER` — где ставить переносы строк в блоках:
  - `Рабочая точка:`
  - `Параметры системы:`

## Источники колонок
- `HFS_CRV`: Наименование = `A`, Артикул = `AE`, мощность двигателя = `Z`,
  модель насоса для сопоставления = `B`, количество основных насосов = `X`, DN = `V`.
- `CRV`: Наименование = `BZ`, Артикул = `B`, мощность двигателя = `BU`.

## Загрузка каталога
- При старте: если есть `catalog_cache.json`, загрузка идёт из него (быстро).
- Если cache нет — данные скачиваются из Google Sheets и cache создаётся.
- Кнопка **«Обновить базу»** внизу слева принудительно перекачивает каталог и обновляет cache.

## Поиск
- Поиск по ключу `Артикул + Наименование` от 3 символов.
- `QCompleter` с частичным совпадением.

## Графики
- Все полиномы 3 порядка (`POLYNOMIAL_DEGREES`).
- КПД принудительно начинается с нуля.
- Левая ось `H/P2`: максимум +20%.
- Правая ось: видимая нижняя часть по `RIGHT_AXIS_VISIBLE_RATIO`,
  подписи тиков до `max +20%` (больше тиков, верх скрыт).
- Рабочая зона по BEP: `0.7..1.2 * BEP`, с ограничением справа по номинальной мощности.
- Кривая трубопровода: тонкая красная сплошная линия.
- Hover: полые точки + popup с параметрами на обоих графических полях.

## Запуск
```bash
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
python main.py
```
